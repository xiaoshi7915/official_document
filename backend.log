nohup: ignoring input
创建数据库表失败: 3734 (HY000): Failed to add the foreign key constraint. Missing column 'file_id' for constraint 'knowledge_usage_stats_ibfk_1' in the referenced table 'knowledge_files'
创建数据库表失败: 3734 (HY000): Failed to add the foreign key constraint. Missing column 'file_id' for constraint 'knowledge_usage_stats_ibfk_1' in the referenced table 'knowledge_files'
✓ 已切换到pysqlite3
当前使用的SQLite版本: 3.46.1
✓ 已切换到pysqlite3
当前使用的SQLite版本: 3.46.1
✓ 已切换到pysqlite3
当前使用的SQLite版本: 3.46.1
✓ 已切换到pysqlite3
当前使用的SQLite版本: 3.46.1
✓ 已切换到pysqlite3
当前使用的SQLite版本: 3.46.1
✓ 已切换到pysqlite3
当前使用的SQLite版本: 3.46.1
✓ 已切换到pysqlite3
当前使用的SQLite版本: 3.46.1
启动公文生成系统后端服务...
数据库配置: 47.118.250.53
DeepSeek API配置: 已配置
 * Serving Flask app 'main'
 * Debug mode: on
[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5003
 * Running on http://192.168.0.31:5003
[33mPress CTRL+C to quit[0m
 * Restarting with stat
创建数据库表失败: 3734 (HY000): Failed to add the foreign key constraint. Missing column 'file_id' for constraint 'knowledge_usage_stats_ibfk_1' in the referenced table 'knowledge_files'
创建数据库表失败: 3734 (HY000): Failed to add the foreign key constraint. Missing column 'file_id' for constraint 'knowledge_usage_stats_ibfk_1' in the referenced table 'knowledge_files'
 * Debugger is active!
 * Debugger PIN: 145-833-389
2025-07-24 14:47:17,918 - INFO - 请求: POST /api/rag/generate-with-rag
2025-07-24 14:47:34,405 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 14:47:34] "POST /api/rag/generate-with-rag HTTP/1.1" 200 -
2025-07-24 14:50:18,899 - INFO - 请求: GET /api/templates
2025-07-24 14:50:18,900 - INFO - 获取模板列表
2025-07-24 14:50:19,088 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 14:50:19] "GET /api/templates HTTP/1.1" 200 -
2025-07-24 14:50:25,874 - INFO - 请求: GET /api/templates
2025-07-24 14:50:25,875 - INFO - 获取模板列表
2025-07-24 14:50:26,149 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 14:50:26] "GET /api/templates HTTP/1.1" 200 -
2025-07-24 14:50:26,157 - INFO - 请求: GET /api/templates
2025-07-24 14:50:26,158 - INFO - 获取模板列表
2025-07-24 14:50:26,401 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 14:50:26] "GET /api/templates HTTP/1.1" 200 -
2025-07-24 14:50:55,537 - INFO - 请求: GET /api/templates
2025-07-24 14:50:55,537 - INFO - 获取模板列表
2025-07-24 14:50:55,771 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 14:50:55] "GET /api/templates HTTP/1.1" 200 -
2025-07-24 14:53:08,955 - INFO - 请求: POST /api/upload
2025-07-24 14:53:08,955 - INFO - 接收到文件上传请求
2025-07-24 14:53:08,957 - INFO - 上传的文件: 20250717_012325_关于新时代文明实践中心建设进展情况的专题报告 (3).docx
2025-07-24 14:53:08,957 - INFO - 解析Word文件
2025-07-24 14:53:08,971 - INFO - 文件解析成功，内容长度: 1502
2025-07-24 14:53:08,971 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 14:53:08] "POST /api/upload HTTP/1.1" 200 -
2025-07-24 14:55:02,179 - INFO - 请求: POST /api/knowledge/upload
2025-07-24 14:55:02,420 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 14:55:02] "POST /api/knowledge/upload HTTP/1.1" 200 -
2025-07-24 15:01:12,894 - INFO - 请求: GET /api/templates
2025-07-24 15:01:12,894 - INFO - 获取模板列表
2025-07-24 15:01:13,133 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 15:01:13] "GET /api/templates HTTP/1.1" 200 -
2025-07-24 15:01:21,700 - INFO - 请求: GET /api/templates
2025-07-24 15:01:21,701 - INFO - 获取模板列表
2025-07-24 15:01:21,903 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 15:01:21] "GET /api/templates HTTP/1.1" 200 -
2025-07-24 15:02:29,288 - INFO - 请求: GET /api/templates
2025-07-24 15:02:29,288 - INFO - 获取模板列表
2025-07-24 15:02:29,517 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 15:02:29] "GET /api/templates HTTP/1.1" 200 -
2025-07-24 15:02:39,218 - INFO - 请求: POST /api/rag/generate-with-rag
2025-07-24 15:02:52,735 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 15:02:52] "POST /api/rag/generate-with-rag HTTP/1.1" 200 -
2025-07-24 15:10:04,078 - INFO - 请求: GET /api/templates
2025-07-24 15:10:04,078 - INFO - 获取模板列表
2025-07-24 15:10:04,305 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 15:10:04] "GET /api/templates HTTP/1.1" 200 -
2025-07-24 15:10:11,136 - INFO - 请求: GET /api/templates
2025-07-24 15:10:11,136 - INFO - 获取模板列表
2025-07-24 15:10:11,337 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 15:10:11] "GET /api/templates HTTP/1.1" 200 -
2025-07-24 15:10:11,346 - INFO - 请求: GET /api/templates
2025-07-24 15:10:11,346 - INFO - 获取模板列表
2025-07-24 15:10:11,608 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 15:10:11] "GET /api/templates HTTP/1.1" 200 -
2025-07-24 15:10:20,380 - INFO - 请求: POST /api/rag/generate-with-rag
2025-07-24 15:10:29,251 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 15:10:29] "POST /api/rag/generate-with-rag HTTP/1.1" 200 -
2025-07-24 15:10:51,602 - INFO - 请求: GET /api/templates
2025-07-24 15:10:51,602 - INFO - 获取模板列表
2025-07-24 15:10:51,874 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 15:10:51] "GET /api/templates HTTP/1.1" 200 -
2025-07-24 15:11:08,765 - INFO - 请求: POST /api/rag/generate-with-rag
2025-07-24 15:11:26,504 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 15:11:26] "POST /api/rag/generate-with-rag HTTP/1.1" 200 -
2025-07-24 15:11:47,297 - INFO - 请求: POST /api/generate-title
2025-07-24 15:11:51,457 - INFO - 生成标题成功: 关于数字化转型工作进展及下一步工作安排的报告
2025-07-24 15:11:51,458 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 15:11:51] "POST /api/generate-title HTTP/1.1" 200 -
2025-07-24 15:12:19,183 - INFO - 请求: POST /api/generate
2025-07-24 15:12:19,183 - INFO - 接收到生成公文请求
2025-07-24 15:12:19,183 - INFO - 模板类型: gongbao, 标题: 关于数字化转型工作进展及下一步工作安排的报告
2025-07-24 15:12:19,411 - INFO - 数据已保存到数据库，ID: 70
2025-07-24 15:12:19,412 - INFO - 开始使用模板生成Word文档
2025-07-24 15:12:19,490 - INFO - 文档生成成功: /api/download/tmpjn_1iasy.docx
2025-07-24 15:12:19,490 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 15:12:19] "POST /api/generate HTTP/1.1" 200 -
2025-07-24 15:12:20,930 - INFO - 请求: GET /api/download/tmpjn_1iasy.docx
2025-07-24 15:12:20,930 - INFO - 请求下载文件: tmpjn_1iasy.docx
2025-07-24 15:12:20,930 - INFO - 文件存在，准备下载: /tmp/tmpjn_1iasy.docx
2025-07-24 15:12:20,931 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 15:12:20] "GET /api/download/tmpjn_1iasy.docx HTTP/1.1" 200 -
2025-07-24 15:12:36,229 - INFO - 请求: POST /api/generate
2025-07-24 15:12:36,229 - INFO - 接收到生成公文请求
2025-07-24 15:12:36,230 - INFO - 模板类型: gongbao, 标题: 关于数字化转型工作进展及下一步工作安排的报告
2025-07-24 15:12:36,518 - INFO - 数据已保存到数据库，ID: 71
2025-07-24 15:12:36,519 - INFO - 开始使用模板生成Word文档
2025-07-24 15:12:36,590 - INFO - 文档生成成功: /api/download/tmpiu34hz0c.docx
2025-07-24 15:12:36,591 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 15:12:36] "POST /api/generate HTTP/1.1" 200 -
2025-07-24 15:12:37,838 - INFO - 请求: GET /api/download/tmpiu34hz0c.docx
2025-07-24 15:12:37,838 - INFO - 请求下载文件: tmpiu34hz0c.docx
2025-07-24 15:12:37,838 - INFO - 文件存在，准备下载: /tmp/tmpiu34hz0c.docx
2025-07-24 15:12:37,839 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 15:12:37] "GET /api/download/tmpiu34hz0c.docx HTTP/1.1" 200 -
2025-07-24 15:15:18,278 - INFO - 请求: POST /api/upload
2025-07-24 15:15:18,278 - INFO - 接收到文件上传请求
2025-07-24 15:15:18,280 - INFO - 上传的文件: 20250714_130251_关于浙江省数字化改革成效的报告 (1).docx
2025-07-24 15:15:18,280 - INFO - 解析Word文件
2025-07-24 15:15:18,291 - INFO - 文件解析成功，内容长度: 1073
2025-07-24 15:15:18,291 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 15:15:18] "POST /api/upload HTTP/1.1" 200 -
2025-07-24 15:19:19,513 - INFO - 请求: GET /api/templates
2025-07-24 15:19:19,513 - INFO - 获取模板列表
2025-07-24 15:19:19,749 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 15:19:19] "GET /api/templates HTTP/1.1" 200 -
2025-07-24 15:20:25,508 - INFO - 请求: GET /api/templates
2025-07-24 15:20:25,508 - INFO - 获取模板列表
2025-07-24 15:20:25,744 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 15:20:25] "GET /api/templates HTTP/1.1" 200 -
2025-07-24 15:20:32,113 - INFO - 请求: GET /api/templates
2025-07-24 15:20:32,113 - INFO - 获取模板列表
2025-07-24 15:20:32,390 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 15:20:32] "GET /api/templates HTTP/1.1" 200 -
2025-07-24 15:20:32,399 - INFO - 请求: GET /api/templates
2025-07-24 15:20:32,399 - INFO - 获取模板列表
2025-07-24 15:20:32,707 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 15:20:32] "GET /api/templates HTTP/1.1" 200 -
2025-07-24 15:20:48,693 - INFO - 请求: POST /api/knowledge/upload
2025-07-24 15:20:48,930 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 15:20:48] "POST /api/knowledge/upload HTTP/1.1" 200 -
2025-07-24 15:21:01,869 - INFO - 请求: GET /api/templates
2025-07-24 15:21:01,869 - INFO - 获取模板列表
2025-07-24 15:21:02,103 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 15:21:02] "GET /api/templates HTTP/1.1" 200 -
2025-07-24 15:21:59,938 - INFO - 请求: POST /api/knowledge/upload
2025-07-24 15:22:00,219 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 15:22:00] "POST /api/knowledge/upload HTTP/1.1" 200 -
2025-07-24 15:24:26,237 - INFO - 请求: POST /api/rag/generate-with-rag
更新使用统计失败: 1146 (42S02): Table 'official_doc.knowledge_usage_stats' doesn't exist
2025-07-24 15:24:37,825 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 15:24:37] "POST /api/rag/generate-with-rag HTTP/1.1" 200 -
2025-07-24 15:30:02,422 - INFO - 请求: POST /api/knowledge/upload
2025-07-24 15:30:02,776 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 15:30:02] "POST /api/knowledge/upload HTTP/1.1" 200 -
 * Detected change in '/opt/official_ai_writer/official_document/backend/models/knowledge_management.py', reloading
✓ 已切换到pysqlite3
当前使用的SQLite版本: 3.46.1
✓ 已切换到pysqlite3
当前使用的SQLite版本: 3.46.1
✓ 已切换到pysqlite3
当前使用的SQLite版本: 3.46.1
✓ 已切换到pysqlite3
当前使用的SQLite版本: 3.46.1
✓ 已切换到pysqlite3
当前使用的SQLite版本: 3.46.1
✓ 已切换到pysqlite3
当前使用的SQLite版本: 3.46.1
✓ 已切换到pysqlite3
当前使用的SQLite版本: 3.46.1
启动公文生成系统后端服务...
数据库配置: 47.118.250.53
DeepSeek API配置: 已配置
 * Restarting with stat
 * Debugger is active!
 * Debugger PIN: 145-833-389
 * Detected change in '/opt/official_ai_writer/official_document/backend/models/knowledge_management.py', reloading
✓ 已切换到pysqlite3
当前使用的SQLite版本: 3.46.1
✓ 已切换到pysqlite3
当前使用的SQLite版本: 3.46.1
✓ 已切换到pysqlite3
当前使用的SQLite版本: 3.46.1
✓ 已切换到pysqlite3
当前使用的SQLite版本: 3.46.1
✓ 已切换到pysqlite3
当前使用的SQLite版本: 3.46.1
✓ 已切换到pysqlite3
当前使用的SQLite版本: 3.46.1
✓ 已切换到pysqlite3
当前使用的SQLite版本: 3.46.1
启动公文生成系统后端服务...
数据库配置: 47.118.250.53
DeepSeek API配置: 已配置
 * Restarting with stat
 * Debugger is active!
 * Debugger PIN: 145-833-389
2025-07-24 15:34:24,175 - INFO - 请求: GET /api/templates
2025-07-24 15:34:24,175 - INFO - 获取模板列表
2025-07-24 15:34:24,425 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 15:34:24] "GET /api/templates HTTP/1.1" 200 -
2025-07-24 15:34:24,434 - INFO - 请求: GET /api/templates
2025-07-24 15:34:24,435 - INFO - 获取模板列表
2025-07-24 15:34:24,627 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 15:34:24] "GET /api/templates HTTP/1.1" 200 -
2025-07-24 15:34:33,167 - INFO - 请求: POST /api/rag/generate-with-rag
2025-07-24 15:34:44,045 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 15:34:44] "POST /api/rag/generate-with-rag HTTP/1.1" 200 -
2025-07-24 15:35:10,298 - INFO - 请求: POST /api/rag/generate-with-rag
2025-07-24 15:35:24,485 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 15:35:24] "POST /api/rag/generate-with-rag HTTP/1.1" 200 -
2025-07-24 15:36:27,311 - INFO - 请求: GET /api/templates
2025-07-24 15:36:27,311 - INFO - 获取模板列表
2025-07-24 15:36:27,545 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 15:36:27] "GET /api/templates HTTP/1.1" 200 -
2025-07-24 15:36:54,725 - INFO - 请求: POST /api/knowledge/upload
2025-07-24 15:36:54,966 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 15:36:54] "POST /api/knowledge/upload HTTP/1.1" 200 -
2025-07-24 15:44:38,964 - INFO - 请求: POST /api/rag/generate-with-rag
2025-07-24 15:44:55,947 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 15:44:55] "POST /api/rag/generate-with-rag HTTP/1.1" 200 -
2025-07-24 15:45:17,452 - INFO - 请求: GET /api/templates
2025-07-24 15:45:17,452 - INFO - 获取模板列表
2025-07-24 15:45:17,641 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 15:45:17] "GET /api/templates HTTP/1.1" 200 -
2025-07-24 15:45:42,968 - INFO - 请求: POST /api/rag/generate-with-rag
2025-07-24 15:46:04,059 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 15:46:04] "POST /api/rag/generate-with-rag HTTP/1.1" 200 -
2025-07-24 15:47:06,478 - INFO - 请求: GET /api/templates
2025-07-24 15:47:06,478 - INFO - 获取模板列表
2025-07-24 15:47:06,693 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 15:47:06] "GET /api/templates HTTP/1.1" 200 -
2025-07-24 15:47:26,989 - INFO - 请求: GET /api/templates
2025-07-24 15:47:26,989 - INFO - 获取模板列表
2025-07-24 15:47:27,179 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 15:47:27] "GET /api/templates HTTP/1.1" 200 -
2025-07-24 15:47:27,189 - INFO - 请求: GET /api/templates
2025-07-24 15:47:27,189 - INFO - 获取模板列表
2025-07-24 15:47:27,401 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 15:47:27] "GET /api/templates HTTP/1.1" 200 -
2025-07-24 15:47:56,896 - INFO - 请求: GET /api/templates
2025-07-24 15:47:56,897 - INFO - 获取模板列表
2025-07-24 15:47:57,167 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 15:47:57] "GET /api/templates HTTP/1.1" 200 -
2025-07-24 15:48:33,730 - INFO - 请求: POST /api/knowledge/upload
2025-07-24 15:48:34,007 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 15:48:34] "POST /api/knowledge/upload HTTP/1.1" 200 -
2025-07-24 15:49:43,758 - INFO - 请求: POST /api/knowledge/upload
2025-07-24 15:49:44,014 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 15:49:44] "POST /api/knowledge/upload HTTP/1.1" 200 -
2025-07-24 15:52:48,452 - INFO - 请求: GET /api/templates
2025-07-24 15:52:48,452 - INFO - 获取模板列表
2025-07-24 15:52:48,667 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 15:52:48] "GET /api/templates HTTP/1.1" 200 -
2025-07-24 15:52:54,531 - INFO - 请求: GET /api/templates
2025-07-24 15:52:54,531 - INFO - 获取模板列表
2025-07-24 15:52:54,787 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 15:52:54] "GET /api/templates HTTP/1.1" 200 -
2025-07-24 15:52:54,796 - INFO - 请求: GET /api/templates
2025-07-24 15:52:54,797 - INFO - 获取模板列表
2025-07-24 15:52:55,105 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 15:52:55] "GET /api/templates HTTP/1.1" 200 -
2025-07-24 15:53:32,776 - INFO - 请求: GET /api/templates
2025-07-24 15:53:32,777 - INFO - 获取模板列表
2025-07-24 15:53:33,004 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 15:53:33] "GET /api/templates HTTP/1.1" 200 -
2025-07-24 15:55:44,313 - INFO - 请求: POST /api/knowledge/upload
2025-07-24 15:55:44,584 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 15:55:44] "POST /api/knowledge/upload HTTP/1.1" 200 -
2025-07-24 15:59:12,323 - INFO - 请求: GET /api/templates
2025-07-24 15:59:12,324 - INFO - 获取模板列表
2025-07-24 15:59:12,582 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 15:59:12] "GET /api/templates HTTP/1.1" 200 -
2025-07-24 16:01:00,688 - INFO - 请求: GET /api/templates
2025-07-24 16:01:00,689 - INFO - 获取模板列表
2025-07-24 16:01:00,954 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 16:01:00] "GET /api/templates HTTP/1.1" 200 -
2025-07-24 16:02:04,838 - INFO - 请求: POST /api/knowledge/upload
2025-07-24 16:02:05,108 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 16:02:05] "POST /api/knowledge/upload HTTP/1.1" 200 -
2025-07-24 16:05:17,798 - INFO - 请求: GET /api/templates
2025-07-24 16:05:17,798 - INFO - 获取模板列表
2025-07-24 16:05:18,106 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 16:05:18] "GET /api/templates HTTP/1.1" 200 -
2025-07-24 16:05:24,879 - INFO - 请求: GET /api/templates
2025-07-24 16:05:24,879 - INFO - 获取模板列表
2025-07-24 16:05:25,111 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 16:05:25] "GET /api/templates HTTP/1.1" 200 -
2025-07-24 16:05:25,123 - INFO - 请求: GET /api/templates
2025-07-24 16:05:25,123 - INFO - 获取模板列表
2025-07-24 16:05:25,393 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 16:05:25] "GET /api/templates HTTP/1.1" 200 -
2025-07-24 16:06:03,156 - INFO - 请求: GET /api/templates
2025-07-24 16:06:03,156 - INFO - 获取模板列表
2025-07-24 16:06:03,424 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 16:06:03] "GET /api/templates HTTP/1.1" 200 -
2025-07-24 16:06:20,547 - INFO - 请求: POST /api/rag/generate-with-rag
2025-07-24 16:06:39,966 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 16:06:39] "POST /api/rag/generate-with-rag HTTP/1.1" 200 -
2025-07-24 16:07:06,787 - INFO - 请求: POST /api/knowledge/upload
2025-07-24 16:07:07,129 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 16:07:07] "POST /api/knowledge/upload HTTP/1.1" 200 -
2025-07-24 16:07:17,824 - INFO - 请求: POST /api/rag/generate-with-rag
2025-07-24 16:07:39,900 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 16:07:39] "POST /api/rag/generate-with-rag HTTP/1.1" 200 -
2025-07-24 16:08:59,052 - INFO - 请求: GET /api/templates
2025-07-24 16:08:59,052 - INFO - 获取模板列表
2025-07-24 16:08:59,289 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 16:08:59] "GET /api/templates HTTP/1.1" 200 -
2025-07-24 16:18:30,662 - INFO - 请求: GET /api/templates
2025-07-24 16:18:30,662 - INFO - 获取模板列表
2025-07-24 16:18:30,871 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 16:18:30] "GET /api/templates HTTP/1.1" 200 -
2025-07-24 16:19:09,009 - INFO - 请求: GET /api/templates
2025-07-24 16:19:09,009 - INFO - 获取模板列表
2025-07-24 16:19:09,217 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 16:19:09] "GET /api/templates HTTP/1.1" 200 -
2025-07-24 16:19:26,417 - INFO - 请求: POST /api/upload
2025-07-24 16:19:26,418 - INFO - 接收到文件上传请求
2025-07-24 16:19:26,420 - INFO - 上传的文件: baogao (2).docx
2025-07-24 16:19:26,420 - INFO - 解析Word文件
2025-07-24 16:19:26,430 - INFO - 文件解析成功，内容长度: 91
2025-07-24 16:19:26,431 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 16:19:26] "POST /api/upload HTTP/1.1" 200 -
2025-07-24 16:19:36,445 - INFO - 请求: POST /api/upload
2025-07-24 16:19:36,445 - INFO - 接收到文件上传请求
2025-07-24 16:19:36,446 - INFO - 上传的文件: 20250714_160136_关于意识形态工作责任制落实情况的督查报告.docx
2025-07-24 16:19:36,447 - INFO - 解析Word文件
2025-07-24 16:19:36,465 - INFO - 文件解析成功，内容长度: 5952
2025-07-24 16:19:36,466 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 16:19:36] "POST /api/upload HTTP/1.1" 200 -
2025-07-24 16:19:54,569 - INFO - 请求: POST /api/upload
2025-07-24 16:19:54,569 - INFO - 接收到文件上传请求
2025-07-24 16:19:54,571 - INFO - 上传的文件: 20250717_012325_关于新时代文明实践中心建设进展情况的专题报告.docx
2025-07-24 16:19:54,571 - INFO - 解析Word文件
2025-07-24 16:19:54,583 - INFO - 文件解析成功，内容长度: 1502
2025-07-24 16:19:54,584 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 16:19:54] "POST /api/upload HTTP/1.1" 200 -
2025-07-24 16:20:35,734 - INFO - 请求: POST /api/generate-title
2025-07-24 16:20:39,225 - INFO - 生成标题成功: 关于我市新时代文明实践中心建设情况的报告
2025-07-24 16:20:39,226 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 16:20:39] "POST /api/generate-title HTTP/1.1" 200 -
2025-07-24 16:21:15,789 - INFO - 请求: POST /api/generate
2025-07-24 16:21:15,789 - INFO - 接收到生成公文请求
2025-07-24 16:21:15,790 - INFO - 模板类型: baogao, 标题: 关于我市新时代文明实践中心建设情况的报告
2025-07-24 16:21:16,000 - INFO - 数据已保存到数据库，ID: 72
2025-07-24 16:21:16,000 - INFO - 开始使用模板生成Word文档
2025-07-24 16:21:16,077 - INFO - 文档生成成功: /api/download/tmp15ce6n2i.docx
2025-07-24 16:21:16,077 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 16:21:16] "POST /api/generate HTTP/1.1" 200 -
2025-07-24 16:21:17,290 - INFO - 请求: GET /api/download/tmp15ce6n2i.docx
2025-07-24 16:21:17,290 - INFO - 请求下载文件: tmp15ce6n2i.docx
2025-07-24 16:21:17,290 - INFO - 文件存在，准备下载: /tmp/tmp15ce6n2i.docx
2025-07-24 16:21:17,291 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 16:21:17] "GET /api/download/tmp15ce6n2i.docx HTTP/1.1" 200 -
 * Detected change in '/opt/official_ai_writer/official_document/backend/routes/ai_operations.py', reloading
✓ 已切换到pysqlite3
当前使用的SQLite版本: 3.46.1
✓ 已切换到pysqlite3
当前使用的SQLite版本: 3.46.1
✓ 已切换到pysqlite3
当前使用的SQLite版本: 3.46.1
✓ 已切换到pysqlite3
当前使用的SQLite版本: 3.46.1
✓ 已切换到pysqlite3
当前使用的SQLite版本: 3.46.1
✓ 已切换到pysqlite3
当前使用的SQLite版本: 3.46.1
✓ 已切换到pysqlite3
当前使用的SQLite版本: 3.46.1
启动公文生成系统后端服务...
数据库配置: 47.118.250.53
DeepSeek API配置: 已配置
 * Restarting with stat
 * Debugger is active!
 * Debugger PIN: 145-833-389
 * Detected change in '/opt/official_ai_writer/official_document/backend/main.py', reloading
✓ 已切换到pysqlite3
当前使用的SQLite版本: 3.46.1
✓ 已切换到pysqlite3
当前使用的SQLite版本: 3.46.1
✓ 已切换到pysqlite3
当前使用的SQLite版本: 3.46.1
✓ 已切换到pysqlite3
当前使用的SQLite版本: 3.46.1
✓ 已切换到pysqlite3
当前使用的SQLite版本: 3.46.1
✓ 已切换到pysqlite3
当前使用的SQLite版本: 3.46.1
✓ 已切换到pysqlite3
当前使用的SQLite版本: 3.46.1
启动公文生成系统后端服务...
数据库配置: 47.118.250.53
DeepSeek API配置: 已配置
 * Restarting with stat
 * Debugger is active!
 * Debugger PIN: 145-833-389
2025-07-24 16:55:18,275 - INFO - 请求: GET /api/templates
2025-07-24 16:55:18,276 - INFO - 获取模板列表
2025-07-24 16:55:18,467 - INFO - 响应: 200
127.0.0.1 - - [24/Jul/2025 16:55:18] "GET /api/templates HTTP/1.1" 200 -
